{
  "description": "IMPROVED working configuration for patient1: Clean, validated setup for reliable mesh generation",
  
  "openfoam_env_path": "source /opt/openfoam12/etc/bashrc",
  
  "SCALING": { 
    "scale_m": 0.001 
  },
  
  "mesh": {
    "base_size_mode": "diameter",
    "cells_per_diameter": 20,
    "min_cells_per_throat": 25
  },
  
  "refinement": {
    "surface_levels": [1, 2],
    "near_band_dx": 8,
    "far_band_dx": 16,
    "feature_angle": {
      "mode": "adaptive",
      "init": 40,
      "step": 5
    }
  },
  
  "layers": {
    "n": 6,
    "expansion": 1.15,
    "relativeSizes": true,
    "minThickness": 0.10,
    "first_layer": {
      "mode": "relative",
      "t1_rel": 0.20,
      "T_rel": 0.75
    }
  },
  
  "physics": {
    "solver_mode": "RANS",
    "flow_model": "turbulent",
    "y_plus": 30,
    "U_peak": 0.8,
    "rho": 1060.0,
    "mu": 0.0035,
    "use_womersley_bands": true,
    "heart_rate_hz": 1.25
  },
  
  "accept": {
    "maxNonOrtho": 70,
    "maxSkewness": 4.0,
    "min_layer_coverage": 0.70
  },
  
  "compute": {
    "procs": 4,
    "max_memory_gb": 0,
    "cell_budget_kb_per_cell": 1.2
  },
  
  "iterations": {
    "max": 1,
    "ladder": [[1,2], [1,2]],
    "use_coverage_gated_progression": false,
    "micro_layer_retries": 1
  },
  
  "advanced": {
    "BLOCKMESH": {
      "resolution": 100,
      "grading": [1, 1, 1]
    },
    "SNAPPY": {
      "maxGlobalCells": 3000000,
      "maxLocalCells": 1500000,
      "nCellsBetweenLevels": 4,
      "resolveFeatureAngle": 40,
      "tolerance": 2.5,
      "nSolveIter": 50,
      "nRelaxIter": 12,
      "nFeatureSnapIter": 12,
      "implicitFeatureSnap": false,
      "explicitFeatureSnap": true,
      "nSmoothPatch": 8,
      "nSmoothInternal": 3,
      "minRefinementCells": 10,
      "maxLoadUnbalance": 0.15
    },
    "LAYERS": {
      "nSurfaceLayers": 6,
      "expansionRatio": 1.15,
      "nGrow": 0,
      "featureAngle": 65,
      "maxThicknessToMedialRatio": 0.55,
      "minMedianAxisAngle": 60,
      "nSmoothSurfaceNormals": 8,
      "nSmoothNormals": 10,
      "nRelaxIter": 10,
      "nLayerIter": 60,
      "nRelaxedIter": 25,
      "maxFaceThicknessRatio": 0.6,
      "slipFeatureAngle": 30,
      "maxBoundarySkewness": 8.0,
      "maxInternalSkewness": 5.0,
      "nSmoothThickness": 8,
      "nSmoothDisplacement": 80,
      "nMedialAxisIter": 12
    }
  },
  
  "SURFACE_FEATURES": {
    "includedAngle": 150
  },
  
  "STAGE1": {
    "use_coverage_gated_progression": false,
    "autoFirstLayerFromDx": true,
    "alpha_total_layers": 0.75,
    "t1_min_fraction_of_dx": 0.018,
    "t1_max_fraction_of_dx": 0.06,
    "band_override": {
      "enabled": true,
      "near_cells": 8,
      "far_cells": 16
    }
  }
}